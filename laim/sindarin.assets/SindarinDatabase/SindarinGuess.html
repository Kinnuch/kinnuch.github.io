<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åœ°å›¾è·¯å¾„çŒœæµ‹æ¸¸æˆ</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    #map-container { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
    .region { width: 100px; height: 100px; background: #ccc; display: flex; align-items: center; justify-content: center; cursor: pointer; position: relative; }
    .region img { width: 100%; height: 100%; object-fit: cover; }
    .highlight { border: 3px solid red; }
    #guess-log { margin-top: 20px; }
    .log-entry.correct { color: green; }
    .log-entry.wrong { color: red; }
  </style>
</head>
<body>
  <h1>åœ°å›¾è·¯å¾„çŒœæµ‹æ¸¸æˆ</h1>
  <div id="map-container"></div>
  <p>å½“å‰è·¯å¾„ï¼š<span id="current-path"></span></p>
  <p>è¯·è¾“å…¥ä¸‹ä¸€ä¸ªåˆ†å—åç§°ï¼š</p>
  <input type="text" id="guess-input">
  <button onclick="submitGuess()">æäº¤çŒœæµ‹</button>
  <div id="guess-log"></div>

  <script>
    // ç¤ºä¾‹åœ°å›¾æ•°æ®
    const regions = {
      A: { name: 'A', desc: 'èµ·ç‚¹A', img: 'https://via.placeholder.com/100/FFAAAA', neighbors: ['C'] },
      B: { name: 'B', desc: 'ç»ˆç‚¹B', img: 'https://via.placeholder.com/100/AAAFFF', neighbors: ['E'] },
      C: { name: 'C', desc: 'ä¸­é—´åœ°å¸¦C', img: 'https://via.placeholder.com/100/AAFFAA', neighbors: ['A', 'D'] },
      D: { name: 'D', desc: 'é«˜åŸD', img: 'https://via.placeholder.com/100/FFFFAA', neighbors: ['C', 'E'] },
      E: { name: 'E', desc: 'åŸå¸‚E', img: 'https://via.placeholder.com/100/FFDDFF', neighbors: ['D', 'B'] }
    };

    let start = 'A';
    let end = 'B';
    let path = findShortestPath(start, end);
    let currentIndex = 1; // path[0] = start, ä»ä¸‹ä¸€ä¸ªå¼€å§‹çŒœ
    let attempts = 0;
    const maxAttempts = 7;

    function findShortestPath(start, end) {
      let queue = [[start]];
      let visited = new Set();
      while (queue.length > 0) {
        let path = queue.shift();
        let node = path[path.length - 1];
        if (node === end) return path;
        if (!visited.has(node)) {
          visited.add(node);
          for (let neighbor of regions[node].neighbors) {
            queue.push([...path, neighbor]);
          }
        }
      }
      return [];
    }

    function renderMap() {
      const container = document.getElementById('map-container');
      container.innerHTML = '';
      for (let key in regions) {
        const div = document.createElement('div');
        div.className = 'region';
        div.dataset.key = key;
        const img = document.createElement('img');
        img.src = regions[key].img;
        div.appendChild(img);
        container.appendChild(div);
      }
    }

    function updateCurrentPath() {
      document.getElementById('current-path').textContent = path.slice(0, currentIndex).join(' -> ');
    }

    function submitGuess() {
      const input = document.getElementById('guess-input').value.trim().toUpperCase();
      const log = document.getElementById('guess-log');
      const entry = document.createElement('div');
      attempts++;

      if (input === path[currentIndex]) {
        currentIndex++;
        entry.textContent = `âœ… ${input} æ˜¯æ­£ç¡®çš„ä¸‹ä¸€ä¸ªåˆ†å—ï¼š${regions[input].desc}`;
        entry.className = 'log-entry correct';
        highlightRegion(input);
        if (currentIndex === path.length) {
          entry.textContent += ' ğŸ‰ æ­å–œï¼Œä½ æˆåŠŸåˆ°è¾¾ç»ˆç‚¹ï¼';
        }
      } else {
        entry.textContent = `âŒ ${input} ä¸æ˜¯æ­£ç¡®çš„ä¸‹ä¸€ä¸ªåˆ†å—ã€‚`;
        entry.className = 'log-entry wrong';
      }
      log.appendChild(entry);
      updateCurrentPath();

      if (attempts >= maxAttempts && currentIndex !== path.length) {
        const fail = document.createElement('div');
        fail.textContent = 'âŒ çŒœæµ‹æ¬¡æ•°è¿‡å¤šï¼Œæ¸¸æˆå¤±è´¥ã€‚æ­£ç¡®è·¯å¾„æ˜¯ï¼š' + path.join(' -> ');
        fail.className = 'log-entry wrong';
        log.appendChild(fail);
        document.getElementById('guess-input').disabled = true;
      }
    }

    function highlightRegion(key) {
      const region = document.querySelector(`.region[data-key="${key}"]`);
      if (region) region.classList.add('highlight');
    }

    // åˆå§‹åŒ–
    renderMap();
    updateCurrentPath();
    highlightRegion(start);
    highlightRegion(end);
  </script>
</body>
</html>
